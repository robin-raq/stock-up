{"ast":null,"code":"var _jsxFileName = \"/Users/raq-school/Documents/NYTTP/stock-up/stock_frontend/src/containers/FormContainer.js\";\nimport React, { Component } from 'react';\nimport tokens from '../config_keys';\nexport default class FormContainer extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      ticker: '',\n      quantity: 0,\n      total: 0,\n      balance: 0,\n      transaction: {\n        ticker: 'N/A',\n        price: 0\n      }\n    };\n\n    this.handleChange = evt => {\n      this.setState({\n        [evt.target.name]: evt.target.value\n      });\n    };\n\n    this.handleSubmit = evt => {\n      evt.preventDefault(); // this.props.getStockInfo(this.state.ticker)\n\n      fetch(`https://cloud.iexapis.com/stable/stock/${this.state.ticker}/quote?token=${tokens.IEX_TOKEN}`).then(r => r.json()).then(stockObj => {\n        // console.log(stockObj)\n        const newTotal = this.state.quantity * stockObj.latestPrice;\n        const transaction = {\n          ticker: stockObj.symbol,\n          price: stockObj.latestPrice,\n          quantity: this.state.quantity,\n          user_id: this.props.currentUser.id,\n          total: newTotal.toFixed(2)\n        };\n        this.setState({\n          transaction: transaction,\n          total: newTotal.toFixed(2)\n        });\n      }).catch(error => {\n        alert(\"Please Verify Stock Symbol and Try Again\");\n      });\n    };\n\n    this.handleClick = () => {\n      // post fetch to database to create new transaction\n      fetch(`http://localhost:3000/transactions`, {\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json',\n          'accept': 'application/json'\n        },\n        body: JSON.stringify(this.state.transaction)\n      }).then(resp => resp.json()).then(respObj => {\n        console.log(respObj.transaction, respObj.user);\n        this.props.updateUserBalance(respObj.user);\n      }).catch(error => {\n        alert(error);\n      }); //post fetch to the database to create a new holding\n\n      fetch(`http://localhost:3000/holdings`, {\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json',\n          'accept': 'application/json'\n        },\n        body: JSON.stringify(this.state.transaction)\n      }).then(resp => resp.json()).then(respObj => {\n        console.log(respObj.holding);\n        this.props.displayNewStock(respObj.holding);\n      }).catch(error => {\n        alert(error);\n      });\n    };\n  }\n\n  componentDidMount() {}\n\n  render() {\n    console.log(this.props.currentUser.balance);\n    const {\n      price\n    } = this.state.transaction;\n    return React.createElement(\"div\", {\n      className: \"pa4-l\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Purchase Stocks\"), React.createElement(\"form\", {\n      className: \"bg-light-yellow mw7 center pa4 br2-ns ba b--black-10\",\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"fieldset\", {\n      className: \"cf bn ma0 pa0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"legend\", {\n      className: \"pa0 f5 f4-ns mb3 black-80\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \" \", React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Current Balance: $\", this.state.balance)), React.createElement(\"div\", {\n      className: \"cf\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"db fw4 lh-copy f6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"Ticker/Symbol\"), React.createElement(\"input\", {\n      className: \"f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns pb1\",\n      onChange: this.handleChange,\n      type: \"text\",\n      id: \"ticker\",\n      name: \"ticker\",\n      placeholder: \"AMZN\",\n      value: this.state.ticker,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"db fw4 lh-copy f6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"Quantity\"), React.createElement(\"input\", {\n      className: \"f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns pb1\",\n      onChange: this.handleChange,\n      type: \"number\",\n      id: \"quantity\",\n      name: \"quantity\",\n      min: \"1\",\n      placeholder: \"0\",\n      value: this.state.quantity,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"f6 f5-l button-reset fl pv3 tc bn bg-animate bg-black-70 hover-bg-black white pointer w-100 w-25-m w-20-l br2-ns br--right-ns\",\n      type: \"submit\",\n      value: \"Get Price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    })), React.createElement(React.Fragment, null, \" \", React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Cost Breakdown: \", this.state.quantity, \" shares of \", this.state.ticker, \" stock @ $\", price, \"/share =  $\", this.state.total, \" \")), \" \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"Complete Transaction:\"), \" \", this.state.total === 0 || this.state.total > this.props.currentUser.balance ? React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"N/A\") : React.createElement(\"button\", {\n      onClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"Buy\"))))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/raq-school/Documents/NYTTP/stock-up/stock_frontend/src/containers/FormContainer.js"],"names":["React","Component","tokens","FormContainer","state","ticker","quantity","total","balance","transaction","price","handleChange","evt","setState","target","name","value","handleSubmit","preventDefault","fetch","IEX_TOKEN","then","r","json","stockObj","newTotal","latestPrice","symbol","user_id","props","currentUser","id","toFixed","catch","error","alert","handleClick","method","headers","body","JSON","stringify","resp","respObj","console","log","user","updateUserBalance","holding","displayNewStock","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport tokens from '../config_keys';\n\nexport default class FormContainer extends Component {\n    state = {\n        ticker: '',\n        quantity: 0,\n        total: 0,\n        balance: 0,\n        transaction:{ticker: 'N/A', price: 0}\n    }\n\n    handleChange = (evt)=>{\n        this.setState({\n            [evt.target.name]: evt.target.value\n        })\n    }\n\n    \n\n    handleSubmit = (evt) =>{\n        evt.preventDefault()\n        // this.props.getStockInfo(this.state.ticker)\n        fetch(`https://cloud.iexapis.com/stable/stock/${this.state.ticker}/quote?token=${tokens.IEX_TOKEN}`)\n        .then(r => r.json())\n        .then((stockObj) => {\n            // console.log(stockObj)\n            const newTotal = this.state.quantity * stockObj.latestPrice\n            const transaction = { ticker: stockObj.symbol, price: stockObj.latestPrice, quantity: this.state.quantity, user_id: this.props.currentUser.id, total: newTotal.toFixed(2)}\n            this.setState({\n                transaction: transaction,\n                total: newTotal.toFixed(2)\n            })\n        }).catch((error) => {\n            alert(\"Please Verify Stock Symbol and Try Again\")\n        });\n    }\n\n    handleClick =() => {\n        // post fetch to database to create new transaction\n        fetch(`http://localhost:3000/transactions`, {\n            method:'POST',\n            headers: { \n                'Content-type': 'application/json',\n                'accept': 'application/json'\n        },\n            body: JSON.stringify(this.state.transaction)\n        })\n        .then(resp => resp.json())\n        .then(respObj=> {\n            console.log(respObj.transaction, respObj.user)\n            this.props.updateUserBalance(respObj.user)\n            \n            \n            \n        }).catch((error) => {\n            alert(error)\n        });\n        \n        //post fetch to the database to create a new holding\n        fetch(`http://localhost:3000/holdings`, {\n            method:'POST',\n            headers: { \n                'Content-type': 'application/json',\n                'accept': 'application/json'\n        },\n            body: JSON.stringify(this.state.transaction)\n        })\n        .then(resp => resp.json())\n        .then(respObj=> {\n            console.log(respObj.holding)\n            this.props.displayNewStock(respObj.holding)\n            \n        }).catch((error) => {\n            alert(error)\n        });\n    }\n    componentDidMount(){\n            \n    }\n    \n    render() {\n        console.log(this.props.currentUser.balance)\n        const {price} = this.state.transaction\n        return (\n            <div className=\"pa4-l\">\n                <h2>Purchase Stocks</h2>\n\n\n                <form className=\"bg-light-yellow mw7 center pa4 br2-ns ba b--black-10\" onSubmit = {this.handleSubmit}>\n                <fieldset className=\"cf bn ma0 pa0\">\n                    <legend className=\"pa0 f5 f4-ns mb3 black-80\"> <strong>Current Balance: ${this.state.balance}</strong></legend>\n                    <div className=\"cf\">\n\n                        <label className=\"db fw4 lh-copy f6\" >Ticker/Symbol</label>\n                        <input className =\"f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns pb1\" onChange = {this.handleChange} type=\"text\" id=\"ticker\" name=\"ticker\" placeholder=\"AMZN\" value = {this.state.ticker}></input><br/><br/>\n\n                        <label className=\"db fw4 lh-copy f6\" >Quantity</label>\n                        <input className =\"f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns pb1\" onChange = {this.handleChange} type=\"number\" id =\"quantity\" name=\"quantity\" min=\"1\" placeholder= \"0\" value = {this.state.quantity}></input><br/><br/>\n\n                        <input className=\"f6 f5-l button-reset fl pv3 tc bn bg-animate bg-black-70 hover-bg-black white pointer w-100 w-25-m w-20-l br2-ns br--right-ns\" type=\"submit\" value=\"Get Price\"></input>\n                    </div>\n\n                    <> <span><p>Cost Breakdown: {this.state.quantity} shares of {this.state.ticker} stock @ ${price}/share =  ${this.state.total} </p></span> <br/>\n                <div>\n                    <h4>Complete Transaction:</h4> {\n                        this.state.total === 0 || this.state.total > this.props.currentUser.balance ? <span>N/A</span>: <button  onClick ={this.handleClick}>Buy</button>\n                    }\n                </div>\n                </>\n\n\n                    </fieldset>\n                </form><br/><br/>   \n            </div>\n        )\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}