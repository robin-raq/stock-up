{"ast":null,"code":"var _jsxFileName = \"/Users/raq-school/Documents/NYTTP/stock-up/stock_frontend/src/containers/FormContainer.js\";\nimport React, { Component } from 'react';\nimport tokens from '../config_keys';\nexport default class FormContainer extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      ticker: '',\n      quantity: 0,\n      total: 0,\n      balance: 0,\n      transaction: {\n        ticker: 'N/A',\n        price: 0\n      },\n      displayQuote: false,\n      canBuy: false\n    };\n\n    this.handleChange = evt => {\n      this.setState({\n        [evt.target.name]: evt.target.value\n      });\n    };\n\n    this.handleSubmit = evt => {\n      evt.preventDefault();\n      fetch(`https://cloud.iexapis.com/stable/stock/${this.state.ticker}/quote?token=${tokens.IEX_TOKEN}`).then(r => r.json()).then(stockObj => {\n        console.log(\"Get Price Response\", stockObj);\n        const newTotal = this.state.quantity * stockObj.latestPrice;\n        const transaction = {\n          ticker: stockObj.symbol,\n          price: stockObj.latestPrice,\n          quantity: this.state.quantity,\n          user_id: this.props.currentUser.id,\n          total: newTotal.toFixed(2)\n        };\n        const canBuy = parseInt(transaction.total) <= parseInt(this.state.balance);\n        this.setState({\n          transaction: transaction,\n          total: newTotal,\n          displayQuote: true,\n          canBuy: canBuy\n        });\n      }).catch(error => {\n        alert(\"Please Verify Stock Symbol And Try Again\");\n      });\n    };\n\n    this.handleClick = () => {\n      // post fetch to database to create new transaction\n      fetch(`http://localhost:3000/transactions`, {\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json',\n          'accept': 'application/json'\n        },\n        body: JSON.stringify(this.state.transaction)\n      }).then(resp => resp.json()).then(respObj => {\n        console.log(\"Transaction and User response from DB\", respObj);\n        this.setState({\n          balance: respObj.user.balance\n        });\n      }).catch(error => {\n        alert(error);\n      }); //post fetch to the database to create a new holding\n\n      fetch(`http://localhost:3000/holdings`, {\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json',\n          'accept': 'application/json'\n        },\n        body: JSON.stringify(this.state.transaction)\n      }).then(resp => resp.json()).then(respObj => {\n        console.log(\"User's Holdings from DB\", respObj.holding);\n        this.props.displayNewStock(respObj.holding);\n        this.setState({\n          ticker: '',\n          quantity: 0,\n          displayQuote: false,\n          canBuy: false\n        });\n      }).catch(error => {\n        alert(error);\n      });\n    };\n  }\n\n  componentDidMount() {\n    fetch('http://localhost:3000/profile', {\n      headers: {\n        'Authorization': `Bearer ${localStorage.token}`\n      }\n    }).then(res => res.json()).then(user => {\n      // console.log(user)   \n      const newBalance = parseInt(user.balance).toFixed(2);\n      this.setState({\n        balance: newBalance\n      });\n    });\n  }\n\n  render() {\n    // console.log(\"currentUser's Balance\", this.state.balance)\n    const {\n      price\n    } = this.state.transaction;\n    return React.createElement(\"div\", {\n      className: \"pa4-l avenir\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"Purchase Stocks\"), React.createElement(\"form\", {\n      className: \"bg-light-yellow mw7 center pa4 br2-ns ba b--black-10\",\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"fieldset\", {\n      className: \"cf bn ma0 pa0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"legend\", {\n      className: \"pa0 f5 f4-ns mb3 black-80\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, this.state.balance >= 0 ? React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Current Balance: $\", parseInt(this.state.balance).toFixed(2)) : React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Current Balance: $ INSUFFICIENT FUNDS \")), React.createElement(\"div\", {\n      className: \"cf\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"db fw4 lh-copy f6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Ticker/Symbol\"), React.createElement(\"input\", {\n      className: \"f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns pb1\",\n      onChange: this.handleChange,\n      type: \"text\",\n      name: \"ticker\",\n      placeholder: \"AMZN\",\n      value: this.state.ticker,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"db fw4 lh-copy f6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"Quantity\"), React.createElement(\"input\", {\n      className: \"f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns pb1\",\n      onChange: this.handleChange,\n      type: \"number\",\n      name: \"quantity\",\n      min: \"1\",\n      placeholder: \" 0\",\n      value: this.state.quantity,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"f6 f5-l button-reset fl pv3 tc bn bg-animate bg-black-70 hover-bg-black white pointer w-100 w-25-m w-20-l br2-ns br--right-ns\",\n      type: \"submit\",\n      value: \"Get Price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }), this.state.displayQuote ? React.createElement(React.Fragment, null, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"Cost Breakdown:\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, this.state.quantity, \" shares of \", this.state.ticker, \" stock @ $\", price.toFixed(2), \"/share\"), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"Total Cost\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \" $\", this.state.transaction.total, \" \"), this.state.canBuy ? React.createElement(\"button\", {\n      onClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"Buy\") : React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"N/A\"))) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/raq-school/Documents/NYTTP/stock-up/stock_frontend/src/containers/FormContainer.js"],"names":["React","Component","tokens","FormContainer","state","ticker","quantity","total","balance","transaction","price","displayQuote","canBuy","handleChange","evt","setState","target","name","value","handleSubmit","preventDefault","fetch","IEX_TOKEN","then","r","json","stockObj","console","log","newTotal","latestPrice","symbol","user_id","props","currentUser","id","toFixed","parseInt","catch","error","alert","handleClick","method","headers","body","JSON","stringify","resp","respObj","user","holding","displayNewStock","componentDidMount","localStorage","token","res","newBalance","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport tokens from '../config_keys';\n\nexport default class FormContainer extends Component {\n    state = {\n        ticker: '',\n        quantity: 0,\n        total: 0,\n        balance: 0,\n        transaction:{ticker: 'N/A', price: 0},\n        displayQuote: false, \n        canBuy: false\n    }\n\n    componentDidMount(){\n        fetch('http://localhost:3000/profile',{\n            headers: {\n                'Authorization': `Bearer ${localStorage.token}`\n            }\n        })\n        .then(res => res.json())\n        .then((user) => {\n            // console.log(user)   \n            const newBalance = parseInt(user.balance).toFixed(2)\n            this.setState({\n                balance: newBalance\n            })\n        })\n    }\n\n    handleChange = (evt)=>{\n        this.setState({\n            [evt.target.name]: evt.target.value\n        })\n    }\n\n    handleSubmit = (evt) =>{\n        evt.preventDefault()\n        fetch(`https://cloud.iexapis.com/stable/stock/${this.state.ticker}/quote?token=${tokens.IEX_TOKEN}`)\n        .then(r => r.json())\n        .then((stockObj) => {\n            console.log(\"Get Price Response\", stockObj)\n\n            const newTotal = this.state.quantity * stockObj.latestPrice\n            const transaction = { ticker: stockObj.symbol, price: stockObj.latestPrice, quantity: this.state.quantity, user_id: this.props.currentUser.id, total: newTotal.toFixed(2)}\n            const canBuy = (parseInt(transaction.total) <= parseInt(this.state.balance))\n\n\n            this.setState({\n                transaction: transaction,\n                total: newTotal,\n                displayQuote: true,\n                canBuy: canBuy   \n            })\n        })\n        .catch((error) => {\n            alert(\"Please Verify Stock Symbol And Try Again\")\n        });\n    }\n\n    handleClick =() => {\n        // post fetch to database to create new transaction\n        fetch(`http://localhost:3000/transactions`, {\n            method:'POST',\n            headers: { \n                'Content-type': 'application/json',\n                'accept': 'application/json'\n        },\n            body: JSON.stringify(this.state.transaction)\n        })\n        .then(resp => resp.json())\n        .then(respObj=> {\n            console.log(\"Transaction and User response from DB\", respObj)\n            this.setState({\n                balance:  respObj.user.balance\n            })\n            \n            \n        }).catch((error) => {\n            alert(error)\n        });\n        \n        //post fetch to the database to create a new holding\n        fetch(`http://localhost:3000/holdings`, {\n            method:'POST',\n            headers: { \n                'Content-type': 'application/json',\n                'accept': 'application/json'\n        },\n            body: JSON.stringify(this.state.transaction)\n        })\n        .then(resp => resp.json())\n        .then(respObj=> {\n            console.log(\"User's Holdings from DB\", respObj.holding)\n            this.props.displayNewStock(respObj.holding)\n            this.setState({ticker: '', quantity: 0, displayQuote: false, canBuy: false})\n            \n        }).catch((error) => {\n            alert(error)\n        });\n    }\n\n\n    \n    \n    render() {\n        // console.log(\"currentUser's Balance\", this.state.balance)\n        const {price} = this.state.transaction\n        return (\n            <div className=\"pa4-l avenir\">\n                <h2>Purchase Stocks</h2>\n                <form \n                    className=\"bg-light-yellow mw7 center pa4 br2-ns ba b--black-10\" \n                    onSubmit = {this.handleSubmit}\n                >\n                <fieldset className=\"cf bn ma0 pa0\">\n                    <legend className=\"pa0 f5 f4-ns mb3 black-80\"> \n                        {\n                            this.state.balance >= 0 ? \n                                <strong>Current Balance: ${parseInt(this.state.balance).toFixed(2)}</strong>  \n                            :   <strong>Current Balance: $ INSUFFICIENT FUNDS </strong>\n                        }\n                    </legend>\n\n                    <div className=\"cf\">\n                        <label className=\"db fw4 lh-copy f6\" >Ticker/Symbol</label>\n                        <input \n                            className =\"f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns pb1\" \n                            onChange = {this.handleChange} \n                            type=\"text\" \n                            name=\"ticker\" \n                            placeholder=\"AMZN\" \n                            value = {this.state.ticker}></input><br/><br/>\n\n                        <label className=\"db fw4 lh-copy f6\" >Quantity</label>\n                        <input \n                            className =\"f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns pb1\" \n                            onChange = {this.handleChange} \n                            type=\"number\"  \n                            name=\"quantity\" \n                            min=\"1\" \n                            placeholder= \" 0\" \n                            value = {this.state.quantity}>\n                        </input><br/><br/>\n\n                        <input \n                            className=\"f6 f5-l button-reset fl pv3 tc bn bg-animate bg-black-70 hover-bg-black white pointer w-100 w-25-m w-20-l br2-ns br--right-ns\" \n                            type=\"submit\" \n                            value=\"Get Price\">\n                        </input>\n                    </div><br/><br/>\n\n                    { \n                    this.state.displayQuote ?\n                    <>\n                        <span>\n                            <strong>Cost Breakdown:</strong> \n                            <p> \n                                {this.state.quantity} shares of {this.state.ticker} stock @ ${price.toFixed(2)}/share \n                            </p>\n                            <strong>Total Cost</strong>\n                            <p> ${this.state.transaction.total} </p> \n\n                            {\n                                this.state.canBuy ? <button onClick ={this.handleClick}>Buy</button> : <button>N/A</button>\n                            }\n                        </span> \n                    </>\n                    :\n                    <div></div>\n                }\n\n                </fieldset>\n                </form><br/><br/>       \n            </div>\n        )\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}