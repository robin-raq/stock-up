{"ast":null,"code":"var _jsxFileName = \"/Users/raq-school/Documents/NYTTP/stock-up/stock_frontend/src/containers/FormContainer.js\";\nimport React, { Component } from 'react';\nimport tokens from '../config_keys';\nexport default class FormContainer extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      ticker: '',\n      quantity: 0,\n      total: 0,\n      balance: 0,\n      transaction: {\n        ticker: 'N/A',\n        price: 0\n      },\n      displayQuote: false,\n      canBuy: false\n    };\n\n    this.handleChange = evt => {\n      this.setState({\n        [evt.target.name]: evt.target.value\n      });\n    };\n\n    this.displayQuote = transaction => {\n      if (transaction.total < this.state.balance || transaction.total !== 0) {\n        return true;\n      } else {\n        return false;\n      }\n    };\n\n    this.handleSubmit = evt => {\n      evt.preventDefault();\n      console.log(\"current balance\", this.state.balance);\n      console.log(\"total\", this.state.total); // this.props.getStockInfo(this.state.ticker)\n\n      fetch(`https://cloud.iexapis.com/stable/stock/${this.state.ticker}/quote?token=${tokens.IEX_TOKEN}`).then(r => r.json()).then(stockObj => {\n        // console.log(stockObj)\n        const newTotal = this.state.quantity * stockObj.latestPrice;\n        const transaction = {\n          ticker: stockObj.symbol,\n          price: stockObj.latestPrice,\n          quantity: this.state.quantity,\n          user_id: this.props.currentUser.id,\n          total: newTotal.toFixed(2)\n        };\n        const canBuy = transaction.total <= this.state.balance;\n        this.setState({\n          transaction: transaction,\n          total: newTotal.toFixed(2),\n          displayQuote: true,\n          canBuy: canBuy\n        });\n      }).catch(error => {\n        alert(\"Please Verify Stock Symbol and Try Again\");\n      });\n    };\n\n    this.handleClick = () => {\n      // post fetch to database to create new transaction\n      fetch(`http://localhost:3000/transactions`, {\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json',\n          'accept': 'application/json'\n        },\n        body: JSON.stringify(this.state.transaction)\n      }).then(resp => resp.json()).then(respObj => {\n        console.log(respObj.transaction, respObj.user);\n        this.props.updateUserBalance(respObj.user);\n        window.location.reload();\n      }).catch(error => {\n        alert(error);\n      }); //post fetch to the database to create a new holding\n\n      fetch(`http://localhost:3000/holdings`, {\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json',\n          'accept': 'application/json'\n        },\n        body: JSON.stringify(this.state.transaction)\n      }).then(resp => resp.json()).then(respObj => {\n        // console.log(respObj.holding)\n        this.props.displayNewStock(respObj.holding);\n      }).catch(error => {\n        alert(error);\n      });\n    };\n  }\n\n  componentDidMount() {\n    fetch('http://localhost:3000/profile', {\n      headers: {\n        'Authorization': `Bearer ${localStorage.token}`\n      }\n    }).then(res => res.json()).then(user => {\n      // console.log(user)   \n      this.setState({\n        balance: user.balance\n      });\n    });\n  }\n\n  render() {\n    console.log(\"form state balance\", this.state.balance); // console.log((this.props.currentUser.balance))\n\n    const {\n      price\n    } = this.state.transaction;\n    return React.createElement(\"div\", {\n      className: \"pa4-l\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Purchase Stocks\"), React.createElement(\"form\", {\n      className: \"bg-light-yellow mw7 center pa4 br2-ns ba b--black-10\",\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"fieldset\", {\n      className: \"cf bn ma0 pa0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"legend\", {\n      className: \"pa0 f5 f4-ns mb3 black-80\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, this.state.balance >= 0 ? React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"Current Balance: $\", this.state.balance) : React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"Current Balance: $ INSUFFICIENT FUNDS \")), React.createElement(\"div\", {\n      className: \"cf\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"db fw4 lh-copy f6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"Ticker/Symbol\"), React.createElement(\"input\", {\n      className: \"f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns pb1\",\n      onChange: this.handleChange,\n      type: \"text\",\n      id: \"ticker\",\n      name: \"ticker\",\n      placeholder: \"AMZN\",\n      value: this.state.ticker,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"db fw4 lh-copy f6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"Quantity\"), React.createElement(\"input\", {\n      className: \"f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns pb1\",\n      onChange: this.handleChange,\n      type: \"number\",\n      id: \"quantity\",\n      name: \"quantity\",\n      min: \"1\",\n      placeholder: \"0\",\n      value: this.state.quantity,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"f6 f5-l button-reset fl pv3 tc bn bg-animate bg-black-70 hover-bg-black white pointer w-100 w-25-m w-20-l br2-ns br--right-ns\",\n      type: \"submit\",\n      value: \"Get Price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    })))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }), this.state.displayQuote ? React.createElement(React.Fragment, null, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"Cost Breakdown:\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, this.state.quantity, \" shares of \", this.state.ticker, \" stock @ $\", price, \"/share\"), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"Total Cost\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, \" $\", this.state.total, \" \"), this.state.canBuy ? React.createElement(\"button\", {\n      onClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"Buy\") : React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"N/A\"))) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/raq-school/Documents/NYTTP/stock-up/stock_frontend/src/containers/FormContainer.js"],"names":["React","Component","tokens","FormContainer","state","ticker","quantity","total","balance","transaction","price","displayQuote","canBuy","handleChange","evt","setState","target","name","value","handleSubmit","preventDefault","console","log","fetch","IEX_TOKEN","then","r","json","stockObj","newTotal","latestPrice","symbol","user_id","props","currentUser","id","toFixed","catch","error","alert","handleClick","method","headers","body","JSON","stringify","resp","respObj","user","updateUserBalance","window","location","reload","displayNewStock","holding","componentDidMount","localStorage","token","res","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport tokens from '../config_keys';\n\nexport default class FormContainer extends Component {\n    state = {\n        ticker: '',\n        quantity: 0,\n        total: 0,\n        balance: 0,\n        transaction:{ticker: 'N/A', price: 0},\n        displayQuote: false, \n        canBuy: false\n    }\n\n    handleChange = (evt)=>{\n        this.setState({\n            [evt.target.name]: evt.target.value\n        })\n    }\n\n    displayQuote =(transaction)=>{\n\n        if(transaction.total < this.state.balance || transaction.total !==0 ){\n            return true\n        }\n        else{\n            return false\n        }\n\n    }\n    handleSubmit = (evt) =>{\n        evt.preventDefault()\n        console.log(\"current balance\", this.state.balance)\n        console.log(\"total\", this.state.total)\n        // this.props.getStockInfo(this.state.ticker)\n        fetch(`https://cloud.iexapis.com/stable/stock/${this.state.ticker}/quote?token=${tokens.IEX_TOKEN}`)\n        .then(r => r.json())\n        .then((stockObj) => {\n            // console.log(stockObj)\n            const newTotal = this.state.quantity * stockObj.latestPrice\n            const transaction = { ticker: stockObj.symbol, price: stockObj.latestPrice, quantity: this.state.quantity, user_id: this.props.currentUser.id, total: newTotal.toFixed(2)}\n\n            const canBuy = transaction.total <= this.state.balance \n\n            this.setState({\n                transaction: transaction,\n                total: newTotal.toFixed(2),\n                displayQuote: true,\n                canBuy: canBuy\n            })\n        }).catch((error) => {\n            alert(\"Please Verify Stock Symbol and Try Again\")\n        });\n    }\n\n    handleClick =() => {\n        // post fetch to database to create new transaction\n        fetch(`http://localhost:3000/transactions`, {\n            method:'POST',\n            headers: { \n                'Content-type': 'application/json',\n                'accept': 'application/json'\n        },\n            body: JSON.stringify(this.state.transaction)\n        })\n        .then(resp => resp.json())\n        .then(respObj=> {\n            console.log(respObj.transaction, respObj.user)\n            this.props.updateUserBalance(respObj.user)\n            window.location.reload();\n            \n            \n        }).catch((error) => {\n            alert(error)\n        });\n        \n        //post fetch to the database to create a new holding\n        fetch(`http://localhost:3000/holdings`, {\n            method:'POST',\n            headers: { \n                'Content-type': 'application/json',\n                'accept': 'application/json'\n        },\n            body: JSON.stringify(this.state.transaction)\n        })\n        .then(resp => resp.json())\n        .then(respObj=> {\n            // console.log(respObj.holding)\n            this.props.displayNewStock(respObj.holding)\n            \n        }).catch((error) => {\n            alert(error)\n        });\n    }\n\n    componentDidMount(){\n        fetch('http://localhost:3000/profile',{\n            headers: {\n                'Authorization': `Bearer ${localStorage.token}`\n            }\n        })\n        .then(res => res.json())\n        .then((user) => {\n            // console.log(user)   \n            this.setState({\n                balance: user.balance\n            })\n        })\n\n    }\n\n    \n    \n    render() {\n        console.log(\"form state balance\", this.state.balance)\n        // console.log((this.props.currentUser.balance))\n        const {price} = this.state.transaction\n        return (\n            <div className=\"pa4-l\">\n                <h2>Purchase Stocks</h2>\n\n\n                <form className=\"bg-light-yellow mw7 center pa4 br2-ns ba b--black-10\" onSubmit = {this.handleSubmit}>\n                <fieldset className=\"cf bn ma0 pa0\">\n                    <legend className=\"pa0 f5 f4-ns mb3 black-80\"> \n                    {this.state.balance >= 0 ? \n                    <strong>Current Balance: ${this.state.balance}</strong> : \n                    <strong>Current Balance: $ INSUFFICIENT FUNDS </strong>\n                    }\n                    \n                    </legend>\n                    <div className=\"cf\">\n\n                        <label className=\"db fw4 lh-copy f6\" >Ticker/Symbol</label>\n                        <input className =\"f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns pb1\" onChange = {this.handleChange} type=\"text\" id=\"ticker\" name=\"ticker\" placeholder=\"AMZN\" value = {this.state.ticker}></input><br/><br/>\n\n                        <label className=\"db fw4 lh-copy f6\" >Quantity</label>\n                        <input className =\"f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns pb1\" onChange = {this.handleChange} type=\"number\" id =\"quantity\" name=\"quantity\" min=\"1\" placeholder= \"0\" value = {this.state.quantity}></input><br/><br/>\n\n                        <input className=\"f6 f5-l button-reset fl pv3 tc bn bg-animate bg-black-70 hover-bg-black white pointer w-100 w-25-m w-20-l br2-ns br--right-ns\" type=\"submit\" value=\"Get Price\"></input>\n                    </div>\n\n                    </fieldset>\n                </form><br/><br/>   \n                { \n                    this.state.displayQuote ?\n                    <>\n                        <span>\n                            <strong>Cost Breakdown:</strong> \n                            <p> \n                                {this.state.quantity} shares of {this.state.ticker} stock @ ${price}/share \n                            </p>\n                            <strong>Total Cost</strong>\n                            <p> ${this.state.total} </p> \n\n                            {\n                                this.state.canBuy ? <button onClick ={this.handleClick}>Buy</button> : <button>N/A</button>\n                            }\n                        </span> \n                    </>\n                    :\n                    <div></div>\n\n                }\n                \n\n\n                {/* <> \n                    \n                    <span><p>Cost Breakdown: {this.state.quantity} shares of {this.state.ticker} stock @ ${price}/share =  ${this.state.total} </p></span> <br/>\n                <div>\n                    <h4>Complete Transaction:</h4> \n                    {\n                        this.state.total === 0 || (this.state.total > this.state.balance) ? <span>N/A</span>: <button  onClick ={this.handleClick}>Buy</button>\n                    }\n                </div>\n                </> */}\n            </div>\n        )\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}